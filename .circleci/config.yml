version: 2

jobs:
    deploy:
      docker:
        - image: arvindr226/alpine-ssh
      steps:
          - run:
              name: Deploy Over SSH
              command: ssh -o StrictHostKeyChecking=no -v $SSH_USER@$SSH_HOST "./deploy.sh"

workflows:
    version: 2
    deploy:
      jobs:
          - deploy:
              filters:
                branches:
                    only: main # only deploy on the main branch